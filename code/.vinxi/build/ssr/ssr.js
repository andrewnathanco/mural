import{isServer as F,getRequestEvent as M,createComponent as v,delegateEvents as Ae,ssrElement as D,escape as L,mergeProps as Pe,ssr as T,ssrHydrationKey as U,ssrStyle as Y,useAssets as $e,NoHydration as ne,HydrationScript as xe,ssrAttribute as Ce,Hydration as Le,renderToStream as Te}from"solid-js/web";import{toWebRequest as ke,getRequestIP as Me,setResponseHeader as W,setResponseStatus as z,appendResponseHeader as Oe,getResponseHeader as qe,removeResponseHeader as Fe,getCookie as Ie,setCookie as je,eventHandler as Be,sendRedirect as Ne,setHeader as He}from"h3";import{M as Ue}from"./assets/index-492886a0.js";import{getOwner as _e,runWithOwner as De,createMemo as S,createContext as re,createSignal as O,createRenderEffect as We,untrack as G,useContext as Ke,on as se,startTransition as ze,resetErrorBoundaries as Q,createComponent as oe,children as Je,createRoot as Ve,Show as ae,onCleanup as ie,lazy as Xe,Suspense as Ye,ErrorBoundary as Ge,createEffect as Qe}from"solid-js";import{provideRequestEvent as Ze}from"solid-js/web/storage";function et(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,o){if(n)return!(n=!1);const a={to:s,options:o,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:c=>{c&&(n=!0),i.navigate(s,{...o,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}const tt=/^(?:[a-z0-9]+:)?\/\//i,nt=/^\/+|(\/)\/+$/g;function q(e,t=!1){const n=e.replace(nt,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function N(e,t,n){if(tt.test(t))return;const r=q(e),s=n&&q(n);let o="";return!s||t.startsWith("/")?o=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+s:o=s,(o||"/")+q(t,!o)}function rt(e,t){return q(e).replace(/\/*(\*.*)?$/g,"")+q(t)}function ce(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function st(e,t,n){const[r,s]=e.split("/*",2),o=r.split("/").filter(Boolean),a=o.length;return i=>{const c=i.split("/").filter(Boolean),l=c.length-a;if(l<0||l>0&&s===void 0&&!t)return null;const d={path:a?"":"/",params:{}},h=y=>n===void 0?void 0:n[y];for(let y=0;y<a;y++){const b=o[y],f=c[y],u=b[0]===":",p=u?b.slice(1):b;if(u&&K(f,h(p)))d.params[p]=f;else if(u||!K(f,b))return null;d.path+=`/${f}`}if(s){const y=l?c.slice(-l).join("/"):"";if(K(y,h(s)))d.params[s]=y;else return null}return d}}function K(e,t){const n=r=>r.localeCompare(e,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function ot(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,o)=>s+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function le(e){const t=new Map,n=_e();return new Proxy({},{get(r,s){return t.has(s)||De(n,()=>t.set(s,S(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ue(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return ue(r).reduce((o,a)=>[...o,...s.map(i=>i+a)],[])}const at=100,it=re(),V=re();function ct(e,t=""){const{component:n,load:r,children:s,metadata:o}=e,a=!s||Array.isArray(s)&&!s.length,i={key:e,component:n,load:r,metadata:o};return he(e.path).reduce((c,l)=>{for(const d of ue(l)){const h=rt(t,d),y=a?h:h.split("/*",1)[0];c.push({...i,originalPath:d,pattern:y,matcher:st(y,!a,e.matchFilters)})}return c},[])}function lt(e,t=0){return{routes:e,score:ot(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const o=e[s],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function he(e){return Array.isArray(e)?e:[e]}function fe(e,t="",n=[],r=[]){const s=he(e);for(let o=0,a=s.length;o<a;o++){const i=s[o];if(i&&typeof i=="object"){i.hasOwnProperty("path")||(i.path="");const c=ct(i,t);for(const l of c){n.push(l);const d=Array.isArray(i.children)&&i.children.length===0;if(i.children&&!d)fe(i.children,l.pattern,n,r);else{const h=lt([...n],r.length);r.push(h)}n.pop()}}}return n.length?r:r.sort((o,a)=>a.score-o.score)}function de(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function ut(e,t){const n=new URL("http://sar"),r=S(c=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),c}},n,{equals:(c,l)=>c.href===l.href}),s=S(()=>r().pathname),o=S(()=>r().search,!0),a=S(()=>r().hash),i=()=>"";return{get pathname(){return s()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return i()},query:le(se(o,()=>ce(r())))}}let $;function ht(e,t,n={}){const{signal:[r,s],utils:o={}}=e,a=o.parsePath||(m=>m),i=o.renderPath||(m=>m),c=o.beforeLeave||et(),l=N("",n.base||"");if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!r().value&&s({value:l,replace:!0,scroll:!1});const[d,h]=O(!1),y=async m=>{h(!0);try{await ze(m)}finally{h(!1)}},[b,f]=O(r().value),[u,p]=O(r().state),g=ut(b,u),E=[],R=O(F?Ee():[]),x={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(m){return N(l,m)}};return We(()=>{const{value:m,state:w}=r();G(()=>{m!==b()&&y(()=>{$="native",f(m),p(w),Q(),R[1]([])}).then(()=>{$=void 0})})}),{base:x,location:g,isRouting:d,renderPath:i,parsePath:a,navigatorFactory:be,beforeLeave:c,preloadRoute:Se,submissions:R};function I(m,w,A){G(()=>{if(typeof w=="number"){w&&(o.go?c.confirm(w,A)&&o.go(w):console.warn("Router integration does not support relative routing"));return}const{replace:j,resolve:_,scroll:P,state:k}={replace:!1,resolve:!0,scroll:!0,...A},C=_?m.resolvePath(w):N("",w);if(C===void 0)throw new Error(`Path '${w}' is not a routable path`);if(E.length>=at)throw new Error("Too many redirects");const X=b();if(C!==X||k!==u()){if(F){const B=M();B&&(B.response=new Response(null,{status:302,headers:{Location:C}})),s({value:C,replace:j,scroll:P,state:k})}else if(c.confirm(C,A)){const B=E.push({value:X,replace:j,scroll:P,state:u()});y(()=>{$="navigate",f(C),p(k),Q(),R[1]([])}).then(()=>{E.length===B&&($=void 0,Re({value:C,state:k}))})}}})}function be(m){return m=m||Ke(V)||x,(w,A)=>I(m,w,A)}function Re(m){const w=E[0];w&&((m.value!==w.value||m.state!==w.state)&&s({...m,replace:w.replace,scroll:w.scroll}),E.length=0)}function Se(m,w){const A=de(t(),m.pathname),j=$;$="preload";for(let _ in A){const{route:P,params:k}=A[_];P.component&&P.component.preload&&P.component.preload(),w&&P.load&&P.load({params:k,location:{pathname:m.pathname,search:m.search,hash:m.hash,query:ce(m),state:null,key:""},intent:"preload"})}$=j}function Ee(){const m=M();return m&&m.initialSubmission?[m.initialSubmission]:[]}}function ft(e,t,n,r,s){const{base:o,location:a}=e,{pattern:i,component:c,load:l}=r().route,d=S(()=>r().path);c&&c.preload&&c.preload();const h=l?l({params:s,location:a,intent:$||"initial"}):void 0;return{parent:t,pattern:i,path:d,params:s,outlet:()=>c?oe(c,{params:s,location:a,data:h,get children(){return n()}}):n(),resolvePath(b){return N(o.path(),b,d())}}}const me=e=>t=>{const{base:n}=t,r=Je(()=>t.children),s=S(()=>fe(t.root?{component:t.root,children:r()}:r(),t.base||"")),o=ht(e,s,{base:n});return e.create&&e.create(o),v(it.Provider,{value:o,get children(){return v(dt,{routerState:o,get branches(){return s()}})}})};function dt(e){const t=S(()=>de(e.branches,e.routerState.location.pathname));if(F){const a=M();a&&(a.routerMatches||(a.routerMatches=[])).push(t().map(({route:i,path:c,params:l})=>({path:i.originalPath,pattern:i.pattern,match:c,params:l,metadata:i.metadata})))}const n=le(()=>{const a=t(),i={};for(let c=0;c<a.length;c++)Object.assign(i,a[c].params);return i}),r=[];let s;const o=S(se(t,(a,i,c)=>{let l=i&&a.length===i.length;const d=[];for(let h=0,y=a.length;h<y;h++){const b=i&&i[h],f=a[h];c&&b&&f.route.key===b.route.key?d[h]=c[h]:(l=!1,r[h]&&r[h](),Ve(u=>{r[h]=u,d[h]=ft(e.routerState,d[h-1]||e.routerState.base,mt(()=>o()[h+1]),()=>t()[h],n)}))}return r.splice(a.length).forEach(h=>h()),c&&l?c:(s=d[0],d)}));return v(ae,{get when(){return o()&&s},keyed:!0,children:a=>v(V.Provider,{value:a,get children(){return a.outlet()}})})}const mt=e=>()=>v(ae,{get when(){return e()},keyed:!0,children:t=>v(V.Provider,{value:t,get children(){return t.outlet()}})});function pt([e,t],n,r){return[n?()=>n(e()):e,r?s=>t(r(s)):t]}function gt(e){if(e==="#")return null;try{return document.querySelector(e)}catch{return null}}function yt(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=pt(O(n(e.get()),{equals:(s,o)=>s.value===o.value}),void 0,s=>(!t&&e.set(s),s));return e.init&&ie(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),me({signal:r,create:e.create,utils:e.utils})}function vt(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function wt(e,t){const n=gt(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function bt(e){const t=new URL(e);return t.pathname+t.search}function Rt(e){let t;const n={value:e.url||(t=M())&&bt(t.request.url)||""};return me({signal:[()=>n,r=>Object.assign(n,r)]})(e)}const St=new Map;function Et(e=!0,t=!1,n="/_server"){return r=>{const s=r.base.path(),o=r.navigatorFactory(r.base);let a={};function i(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function c(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const u=f.composedPath().find(I=>I instanceof Node&&I.nodeName.toUpperCase()==="A");if(!u||t&&!u.getAttribute("link"))return;const p=i(u),g=p?u.href.baseVal:u.href;if((p?u.target.baseVal:u.target)||!g&&!u.hasAttribute("state"))return;const R=(u.getAttribute("rel")||"").split(/\s+/);if(u.hasAttribute("download")||R&&R.includes("external"))return;const x=p?new URL(g,document.baseURI):new URL(g);if(!(x.origin!==window.location.origin||s&&x.pathname&&!x.pathname.toLowerCase().startsWith(s.toLowerCase())))return[u,x]}function l(f){const u=c(f);if(!u)return;const[p,g]=u,E=r.parsePath(g.pathname+g.search+g.hash),R=p.getAttribute("state");f.preventDefault(),o(E,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:R&&JSON.parse(R)})}function d(f){const u=c(f);if(!u)return;const[p,g]=u;a[g.pathname]||r.preloadRoute(g,p.getAttribute("preload")!=="false")}function h(f){const u=c(f);if(!u)return;const[p,g]=u;a[g.pathname]||(a[g.pathname]=setTimeout(()=>{r.preloadRoute(g,p.getAttribute("preload")!=="false"),delete a[g.pathname]},200))}function y(f){const u=c(f);if(!u)return;const[,p]=u;a[p.pathname]&&(clearTimeout(a[p.pathname]),delete a[p.pathname])}function b(f){let u=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.formAction:f.target.action;if(!u)return;if(!u.startsWith("action:")){const g=new URL(u);if(u=r.parsePath(g.pathname+g.search),!u.startsWith(n))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=St.get(u);if(p){f.preventDefault();const g=new FormData(f.target);p.call(r,g)}}Ae(["click","submit"]),document.addEventListener("click",l),e&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",y),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",b),ie(()=>{document.removeEventListener("click",l),e&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",y),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",b)})}}function At(e){return F?Rt(e):yt({get:()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),set({value:t,replace:n,scroll:r,state:s}){n?window.history.replaceState(s,"",t):window.history.pushState(s,"",t),wt(window.location.hash.slice(1),r)},init:t=>vt(window,"popstate",()=>t()),create:Et(e.preload,e.explicitLinks,e.actionBase),utils:{go:t=>window.history.go(t)}})(e)}const Pt=" ",$t={style:e=>D("style",e.attrs,()=>L(e.children),!0),link:e=>D("link",e.attrs,void 0,!0),script:e=>e.attrs.src?D("script",Pe(()=>e.attrs,{get id(){return e.key}}),()=>T(Pt),!0):null};function J(e){let{tag:t,attrs:{key:n,...r}={key:void 0},children:s}=e;return $t[t]({attrs:r,key:n,children:s})}function xt(e,t,n,r="default"){return Xe(async()=>{{const o=(await e.import())[r],i=(await t.inputs?.[e.src].assets()).filter(l=>l.tag==="style"||l.attrs.rel==="stylesheet");return{default:l=>[...i.map(d=>J(d)),oe(o,l)]}}})}const pe=[{type:"page",$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("./index.js"),import:()=>import("./index.js")},path:"/",filePath:"/Users/andrew/Documents/Dev/Projects/andrewnathanco/github/challenge/code/src/routes/index.tsx"}],Ct=kt(pe.filter(e=>e.type==="page")),Lt=Mt(pe.filter(e=>e.type==="api"));function Tt(e,t){const n=e.split("/").filter(Boolean);e:for(const r of Lt){const s=r.matchSegments;if(n.length<s.length||!r.wildcard&&n.length>s.length)continue;for(let i=0;i<s.length;i++){const c=s[i];if(c&&n[i]!==c)continue e}const o=r[`$${t}`];if(o==="skip"||o===void 0)return;const a={};for(const{type:i,name:c,index:l}of r.params)i===":"?a[c]=n[l]:a[c]=n.slice(l).join("/");return{handler:o,params:a}}}function kt(e){function t(n,r,s,o){const a=Object.values(n).find(i=>s.startsWith(i.id+"/"));return a?(t(a.children||(a.children=[]),r,s.slice(a.id.length)),n):(n.push({...r,id:s,path:s.replace(/\/\([^)/]+\)/g,"")}),n)}return e.sort((n,r)=>n.path.length-r.path.length).reduce((n,r)=>t(n,r,r.path,r.path),[])}function Mt(e){return e.flatMap(t=>ge(t.path).map(r=>({...t,path:r}))).map(Ot).sort((t,n)=>n.score-t.score)}function ge(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return ge(r).reduce((o,a)=>[...o,...s.map(i=>i+a)],[])}function Ot(e){const t=e.path.split("/").filter(Boolean),n=[],r=[];let s=0,o=!1;for(const[a,i]of t.entries())if(i[0]===":"){const c=i.slice(1);s+=3,n.push({type:":",name:c,index:a}),r.push(null)}else i[0]==="*"?(s-=1,n.push({type:"*",name:i.slice(1),index:a}),o=!0):(s+=4,r.push(i));return{...e,score:s,params:n,matchSegments:r,wildcard:o}}function ye(){function e(n){return{...n,...n.$$route?n.$$route.require().route:void 0,metadata:{...n.$$route?n.$$route.require().route.metadata:{},filesystem:!0},component:xt(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(e):void 0}}return Ct.map(e)}let Z;const qt=()=>F?M().routes:Z||(Z=ye());function Ft(){return v(Ue,{get children(){return v(At,{get base(){return"/challenge"},root:e=>v(Ye,{get children(){return e.children}}),get children(){return v(qt,{})}})}})}const It=["<div",' style="padding:16px"><div style="','"><p style="font-weight:bold" id="error-message">','</p><button id="reset-errors" style="','">Clear errors and retry</button><pre style="margin-top:8px;width:100%">',"</pre></div></div>"];function jt(e){return v(Ge,{fallback:t=>v(Bt,{error:t}),get children(){return e.children}})}function Bt(e){return Qe(()=>console.error(e.error)),T(It,U(),Y(`
          background-color: rgba(252, 165, 165);
          color: rgb(153, 27, 27);
          border-radius": 5px;
          overflow: scroll;
          padding: 16px;
          margin-bottom: 8px;
        `),L(e.error.message),Y(`color: rgba(252, 165, 165);
            background-color: rgb(153, 27, 27);
            border-radius: 5px;
            padding: 4px 8px`),L(e.error.stack))}const Nt=["<script",">","<\/script>"],Ht=["<script",' type="module" async',"><\/script>"],Ut=T("<!DOCTYPE html>");function _t(e){const t=M();let n=[];return Promise.resolve().then(async()=>{let r=t.routes;if(t.routerMatches&&t.routerMatches[0])for(let s=0;s<t.routerMatches[0].length;s++){const o=t.routerMatches[0][s];if(o.metadata&&o.metadata.filesystem){const a=r.find(l=>l.path===o.path),c=await globalThis.MANIFEST.client.inputs[a.$component.src].assets();n.push.apply(n,c),r=a.children}}n=[...new Map(n.map(s=>[s.attrs.key,s])).values()].filter(s=>s.attrs.rel==="modulepreload"&&!t.assets.find(o=>o.attrs.key===s.attrs.key))}),$e(()=>n.length?n.map(r=>J(r)):void 0),v(ne,{get children(){return[Ut,v(e.document,{get assets(){return[v(xe,{}),t.assets.map(r=>J(r))]},get scripts(){return[T(Nt,U(),`window.manifest = ${JSON.stringify(t.manifest)}`),T(Ht,U(),Ce("src",L(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return v(Le,{get children(){return v(jt,{get children(){return v(Ft,{})}})}})}})]}})}const ve=Symbol("h3Event"),H=Symbol("fetchEvent"),Dt={get(e,t){return t===H?e:e[t]??e[ve][t]}};function Wt(e){return new Proxy({request:ke(e),clientAddress:Me(e),locals:{},[ve]:e},Dt)}function Kt(e){if(!e[H]){const t=Wt(e);e[H]=t}return e[H]}function zt(e){const t=Ie(e,"flash");if(!t)return;let n=JSON.parse(t);if(!n||!n.result)return[];const r=[...n.input.slice(0,-1),new Map(n.input[n.input.length-1])];return je(e,"flash","",{maxAge:0}),{url:n.url,result:n.error?new Error(n.result):n.result,input:r}}async function we(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,W(e,"Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],initialSubmission:zt(e),routes:ye(),components:{status:r=>(z(e,r.code,r.text),()=>z(e,200)),header:r=>(r.append?Oe(e,r.name,r.value):W(e,r.name,r.value),()=>{const s=qe(e,r.name);if(s&&typeof s=="string"){const o=s.split(", "),a=o.indexOf(r.value);a!==-1&&o.splice(a,1),o.length?W(e,r.name,o.join(", ")):Fe(e,r.name)}})},$islands:new Set})}function Jt(e,t={}){return Be({onRequest:t.onRequest,onBeforeResponse:t.onBeforeResponse,handler:n=>{const r=Kt(n);return Ze(r,async()=>{const s=Tt(new URL(r.request.url).pathname,r.request.method);if(s){const h=(await s.handler.import())[r.request.method];return r.params=s.params,await h(r)}const o=await we(r);let a={...t};if(a.onCompleteAll){const d=a.onCompleteAll;a.onCompleteAll=h=>{te(o)(h),d(h)}}else a.onCompleteAll=te(o);if(a.onCompleteShell){const d=a.onCompleteShell;a.onCompleteShell=h=>{ee(o,n)(),d(h)}}else a.onCompleteShell=ee(o,n);const i=Te(()=>e(o),a);if(o.response&&o.response.headers.get("Location"))return Ne(r,o.response.headers.get("Location"));const{writable:c,readable:l}=new TransformStream;return i.pipeTo(c),l})}})}function ee(e,t){return()=>{e.response&&e.response.headers.get("Location")&&(z(t,302),He(t,"Location",e.response.headers.get("Location")))}}function te(e){return({write:t})=>{const n=e.response&&e.response.headers.get("Location");n&&t(`<script>window.location="${n}"<\/script>`)}}function Vt(e,t={}){return Jt(e,{...t,createPageEvent:we})}const Xt=['<head><meta charset="utf-8"><link rel="icon" href="/favicon.ico">',"</head>"],Yt=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"],nn=Vt(()=>v(_t,{document:({assets:e,children:t,scripts:n})=>T(Yt,U(),v(ne,{get children(){return T(Xt,L(e))}}),L(t),L(n))}));export{nn as default};
